---
title: NSI
subtitle: NSI
description:
  NSI
categories:
  - 시각화
author: 양성모
date: "2024/07/24"
image: "sp500.jpg"
image-alt: ""
page-layout: article
---
# NSI
```{python}
#| echo: false

import pandas as pd
import numpy as np
import plotly.graph_objects as go
import plotly.express as px
from plotly.subplots import make_subplots
from dash import Dash, dcc, html, Input, Output

import os

path = "./"
filename = 'result_korea_NSI.csv'
df = pd.read_csv(os.path.join(path, filename))

df['NSI'] = df['NSI'].astype('float')
df['Date'] = pd.to_datetime(df['Date'])
updated = df.loc[df.index[-1], 'Date']

fig = make_subplots(specs=[[{'secondary_y':True}]])
fig.update_xaxes(range=[(pd.Timestamp.now() - pd.DateOffset(months=12)), (pd.Timestamp.now())])

fig.add_trace(go.Scatter(x = df.Date,
                        y=df.NSI,
                        mode='lines+markers',
                        marker=dict(
                        size=3,
                        symbol="cross",
                        ),
                        name = 'NSI')
        )
fig.add_trace(go.Scatter(x = df.Date,
                        y=df['Adj Close'],
                        name = 'KOSPI'),
                        secondary_y = True,
                )
fig.add_hline(y = 100, line_color='black', opacity=0.3)

fig.update_layout(
# width=800,
margin=dict(l=0, r=0, t=0, b=0), # remove due to mis-aligned range button
hovermode = 'x' or 'y',
showlegend=True,
legend = dict(
        orientation="h", # 가로 방향으로
        yanchor="bottom", y=0, # y축 방향 위치 설정
        xanchor="left", x=0, # x축 방향 위치 설정
),
)
fig.update_yaxes(fixedrange=True, secondary_y=True)
fig.update_layout(
        xaxis = dict(
                fixedrange = True,
                showspikes=True,
                spikethickness=1,
                rangeslider_visible = True,
                tickangle = 45,
                tickfont = dict(size = 9),
                range=[(pd.Timestamp.now() - pd.DateOffset(years=1)), \
                        pd.Timestamp.now()],
                ),
        yaxis = dict(
                # title = 'NSI',
                showspikes=True,
                spikethickness=1,
                fixedrange = True,
        ),
        yaxis2=dict(type='log'),
        # title = '한국 뉴스 심리지수 (NSI; News Sentiment Index)',
)

fig.show()
```

