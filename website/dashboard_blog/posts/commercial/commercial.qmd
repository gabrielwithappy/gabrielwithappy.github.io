---
title: 상권분석
subtitle: 상권분석
description:
  상권분석
categories:
  - 시각화
author: 양성모
date: "23/06/2024"
image: "data_visualization.jpg"
image-alt: ""
page-layout: article
---

우리나라 상권 중 총 유동인구수가 높은 10개의 지역을 정리하고 각 지역의 유동인구 특성을 확인합니다.

```{python}
#| echo: false

import pandas as pd
import numpy as np
import plotly.graph_objects as go
import plotly.express as px

file_path="./commercial.csv"
df = pd.read_csv(file_path, encoding="cp949")
df['상권이름'] = df['상권_코드_명'].astype(str) + '_' + df['상권_코드'].astype(str)
df = df.sort_values(by='총_유동인구_수', ascending=False)
df = df.drop_duplicates(['상권이름'])
df[['상권이름', '총_유동인구_수']].head(15)
df = df[df['상권이름'] != '천호초등학교_3111070']
fig = px.bar(df.head(50), y='상권이름', x='총_유동인구_수', title='상권분석 그래프', orientation='h', height=700, template='seaborn')
fig.update_layout(yaxis=dict(autorange="reversed"))
fig.show()
```

총 유동인구수를 기준으로 정렬한 결과 종로/청계 관광특구가 1위를 차지 했습니다.

```{python}
#| echo: false
df_age_list = ['상권이름', '연령대_10_유동인구_수', '연령대_20_유동인구_수', '연령대_30_유동인구_수', '연령대_40_유동인구_수', '연령대_50_유동인구_수', '연령대_60_이상_유동인구_수']
df_age = pd.melt(df[df_age_list], id_vars=['상권이름'], var_name='연령대', value_name='인구수')

locations = df['상권이름'].head(10)
fig = go.Figure()
for loc in locations:
    df_graph = df_age[df_age['상권이름'] == loc]
    fig.add_trace(go.Bar(x=df_graph['연령대'], y=df_graph['인구수'], name = loc))
    # fig = px.bar(melt , x='연령대', y='인구수', title=location, facet_row='상권이름', barmode= 'group')

fig.update_layout(
    legend_yanchor="bottom",
    # legend_y=0,
    legend_xanchor="right",
    # legend_x=0
)

fig.show()
```

10개 지역의 연령대별 유동인구 비교는 위와 같습니다.